{% extends "base.html" %}

{% block title %} Login {% endblock %}


{% block content %}
  <div class ="d-flex flex-column min-vh-100 justify-content-center align-items-center">  
 <form action = "/verify_login" method = "post">
  <div class="form-row align-items-center">
  <h4 class = "mx-auto mb-3"> Login Page </h4>
  
  
    <div class="col-md-12 mb-4">
      <input placeholder = "Username"type="text" autocomplete="off" class="form-control form-control-sm" name = "username"> </input>
    </div>
    
    <div class = "col-md-12 mb-4">
      <input type = "password" class = "form-control form-control-sm" placeholder = "Password" name = "password" > </input>
    </div>
      <div class="col-md-12 mb-4">
      <input placeholder = "Key"type="text" autocomplete="off" class="form-control form-control-sm" name = "key"> </input>
      
    </div>
    <button type="button" onclick="generate(this)" class="btn btn-primary col-12 mb-2">Generate Access Key</button>
    
      <button type="submit" class="btn btn-primary col-12">Sign In</button>
    
    
    
    
  </div>
</form>
</div>


<div class="position-fixed bottom-0 end-0 p-3" style="z-index: 11">
  <div id="liveToast" class="toast" role="alert" aria-live="assertive" aria-atomic="true">
    <div class="toast-header">
      <img src="static/bootstrap-icons-1.8.1/person.svg" class="rounded me-2" alt="...">
      <strong class="me-auto">Library Guide</strong>
      <small></small>
      <button type="button" class="btn-close" data-bs-dismiss="toast" aria-label="Close"></button>
    </div>
    <div class="toast-body my-3">
      Not yet registered? Click <a href="/register">this link</a>
    </div>
  </div>
</div>

{% endblock %}


{% block script %}
<script src="{{url_for('static', filename = '/bootstrap-5.1.3-dist/bootstrap-5.1.3-dist/js/bootstrap.min.js' )}}" type="text/javascript" charset="utf-8"></script>

<script type="text/javascript" charset="utf-8">
  
  
  function generate(e){
  fetch(`${window.origin}/generate_key`, {
    method: "POST",
    credentials: "include",
    body: JSON.stringify("Generate"),
    cache: "no-cache",
    headers: new Headers({
      "content-type": "application/json"
    })
  })
/* do something */ e.preventDefault()
  }
</script>
<script type="text/javascript" charset="utf-8">
  
var toastLiveExample = document.getElementById('liveToast')

bootstrap.Toast.Default.delay = 50000
window.onload = function(){

var toast = new bootstrap.Toast(toastLiveExample)
    toast.show()
}
</script>



{% endblock %}